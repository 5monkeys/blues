{%- macro yesno(boolean) -%}
	{%- if boolean -%}
		yes
	{%- else -%}
		no
	{%- endif -%}
{%- endmacro -%}

[global]
workgroup = {{ workgroup }}

server string = %h server (Samba, Ubuntu)
dns proxy = no

log file = /var/log/samba/log.%m
max log size = 1000
syslog = 0

panic action = /usr/share/samba/panic-action %d

server role = standalone server
obey pam restrictions = yes
unix password sync = yes
passwd program = /usr/bin/passwd %u
passwd chat = *Enter\snew\s*\spassword:* %n\n *Retype\snew\s*\spassword:* %n\n *password\supdated\ssuccessfully* .
pam password change = yes
map to guest = bad user

{% for share in shares -%}
[{{ share.name }}]
{% if 'comment' in share -%}
comment = {{ share.comment }}
{%- endif %}
path = {{ share.path }}
public = {{ yesno(share.public) }}
browseable = {{ yesno(share.browseable) }}
writeable = {{ yesno(share.writeable) }}
read only = {{ yesno(share.read_only) }}
create mask = {{ share.create_mask }}
directory mask = {{ share.directory_mask }}
guest ok = {{ yesno(share.guest_ok) }}
{% if 'force_user' in share -%}
force user = {{ share.force_user }}
{%- endif %}

{% endfor -%}
